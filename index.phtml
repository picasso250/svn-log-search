<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>SVN Log Search</title>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">
  .svn-log-entry span {
    color: #999999;
  }
  .svn-log-entry rev {
    color: #914040;
  }
  .svn-log-entry name {
    color: #292627;
  }
  .svn-log-entry date {
    color: #897F8A;
  }
  .svn-log-entry linenum {
    color: #696679;
  }
  .svn-log-entry file {
    color: #aaa;
  }
  .svn-log-entry .A-action {
    color: #56B459;
  }
  .svn-log-entry .M-action {
    color: #4C4C99;
  }
  .svn-log-entry .D-action {
    color: #F03B3B;
  }
  .svn-log-entry keyword {
    background-color: #E9D220;
    font-weight: bold;
    border-radius: 5px;
    color: #414141;
  }
  </style>
</head>
<body>
  <!-- 头部 -->
  <div id="header">
    <h1>SVN Log Search</h1>
    <div><?php echo $root_url ?></div>
  </div>
  <!-- /头部 -->

  <!-- 主内容区 -->
  <div id="section">
    <form>
      <div>
        <label>
          <input name="keyword" placeholder="key word" value="<?php echo $keyword ?>">
          <input type="submit" value="搜索">
        </label>
      </div>
    </form>
    <hr>
    <div>
      <?php if (isset($logs)): ?>
      <div><?php echo count($logs) ?> Matched.</div>
      <ul>
        <?php foreach ($logs as $log): ?>
          <li>
            <div class="svn-log-entry">
              <rev><?php echo $log->rev ?></rev> |
              <name><?php echo $log->author ?></name> |
              <date><?php echo $log->commit_date ?></date>
              <ul>
                <?php foreach (get_files_by_rev($log->id) as $file): ?>
                  <li class="<?php echo $file->action ?>-action">
                    <?php echo $file->action ?>
                    <file><?php echo $file->file_path ?></file>
                    <?php if ($file->action == 'M'): ?>
                      <a href="diff.php?repo=<?php echo htmlentities($root_url) ?>&amp;file=<?php echo $file->file_path ?>">diff</a>
                    <?php endif ?>
                  </li>
                <?php endforeach ?>
              </ul>
              <div><?php echo nl2br($log->msg) ?></div>
            </div>
          </li>
        <?php endforeach ?>
      </ul>
      <?php endif ?>
    </div>
  </div>
  <!-- /主内容区 -->

</body>
</html>


